import cv2
import transfer_view as tv
from virtual_show import draw_canvas as dc


our_team_point = [[[[240, 78], [314, 76], [418, 70], [499, 165], [490, 335]]], [[[229, 81], [304, 79], [416, 70], [496, 171], [480, 339]]], [[[223, 87], [292, 80], [405, 73], [493, 177], [467, 343]]], [[[222, 80], [280, 81], [403, 68], [492, 179], [450, 338]]], [[[220, 88], [275, 85], [396, 73], [493, 177], [436, 346]]], [[[209, 87], [264, 87], [393, 76], [489, 187], [427, 347]]], [[[200, 88], [254, 86], [386, 73], [485, 197], [415, 345]]], [[[199, 85], [245, 88], [378, 73], [490, 200], [399, 344]]], [[[191, 86], [230, 86], [380, 76], [489, 205], [403, 345]]], [[[194, 95], [220, 90], [378, 76], [489, 198], [405, 337]]], [[[213, 90], [192, 91], [370, 78], [489, 203], [404, 347]]], [[[186, 86], [205, 87], [374, 78], [488, 207], [399, 341]]], [[[187, 98], [192, 100], [366, 87], [484, 201], [380, 333]]], [[[385, 322], [488, 185], [374, 85], [196, 98], [192, 98]]], [[[186, 99], [192, 93], [374, 84], [478, 187], [387, 335]]], [[[187, 100], [187, 84], [371, 84], [482, 183], [383, 316]]], [[[372, 318], [480, 191], [379, 82], [183, 97], [189, 85]]], [[[183, 98], [193, 81], [372, 86], [483, 175], [359, 330]]], [[[352, 336], [474, 173], [373, 77], [204, 76], [183, 98]]], [[[176, 100], [189, 82], [375, 78], [473, 160], [338, 337]]], [[[184, 97], [200, 79], [368, 85], [473, 164], [328, 337]]], [[[182, 96], [197, 79], [372, 88], [468, 159], [326, 334]]], [[[180, 101], [205, 74], [366, 79], [461, 159], [311, 342]]], [[[180, 98], [212, 80], [359, 80], [456, 157], [305, 335]]], [[[181, 98], [207, 80], [361, 74], [446, 155], [295, 343]]], [[[182, 103], [212, 78], [356, 80], [451, 157], [288, 353]]], [[[181, 98], [210, 77], [348, 77], [453, 150], [276, 344]]], [[[190, 104], [210, 79], [354, 73], [459, 150], [266, 336]]], [[[189, 107], [217, 70], [347, 78], [444, 145], [257, 347]]], [[[192, 115], [217, 85], [346, 71], [445, 142], [271, 334]]], [[[185, 107], [226, 73], [342, 79], [451, 144], [275, 328]]], [[[189, 104], [218, 70], [350, 74], [440, 128], [267, 318]]], [[[189, 106], [221, 73], [333, 75], [436, 137], [282, 314]]], [[[191, 112], [226, 75], [327, 70], [439, 131], [282, 302]]], [[[195, 107], [233, 68], [326, 80], [437, 129], [288, 304]]], [[[289, 285], [430, 129], [326, 77], [228, 69], [203, 110]]], [[[200, 119], [226, 73], [316, 77], [426, 121], [290, 261]]], [[[204, 114], [231, 73], [317, 87], [428, 118], [297, 258]]], [[[210, 117], [228, 69], [319, 81], [423, 118], [293, 244]]], [[[220, 117], [226, 70], [324, 78], [420, 113], [302, 227]]], [[[222, 116], [226, 75], [309, 74], [425, 114], [292, 209]]], [[[225, 116], [235, 71], [319, 75], [411, 108]]], [[[231, 115], [227, 64], [314, 64], [292, 175], [423, 106]]], [[[290, 180], [422, 109], [319, 70], [226, 101], [229, 69]]], [[[280, 167], [422, 105], [318, 71], [231, 108], [233, 72]]], [[[276, 161], [229, 109], [230, 76], [317, 73], [427, 100]]], [[[272, 157], [227, 107], [235, 72], [312, 68], [428, 108]]], [[[263, 148], [228, 109], [235, 70], [313, 68], [433, 103]]], [[[257, 144], [229, 104], [237, 71], [318, 72], [434, 101]]], [[[243, 143], [236, 111], [242, 80], [326, 69], [432, 103]]], [[[241, 142], [241, 115], [245, 80], [333, 72], [435, 102]]], [[[233, 128], [241, 109], [248, 79], [339, 74], [449, 102]]], [[[215, 136], [232, 114], [244, 83], [345, 76], [451, 101]]], [[[213, 134], [226, 113], [250, 75], [349, 72], [456, 100]]], [[[205, 145], [228, 111], [250, 87], [361, 69], [460, 96]]], [[[195, 153], [221, 120], [255, 90], [374, 79], [464, 103]]], [[[193, 141], [209, 112], [257, 83], [378, 73], [471, 100]]], [[[193, 144], [217, 117], [268, 93], [383, 67], [469, 97]]], [[[191, 136], [212, 119], [268, 93], [399, 71], [473, 95]]], [[[194, 141], [211, 116], [272, 88], [406, 65], [479, 96]]], [[[188, 139], [211, 119], [282, 95], [411, 72], [484, 95]]], [[[190, 144], [211, 122], [293, 90], [423, 69], [490, 100]]], [[[193, 138], [206, 121], [292, 97], [429, 75], [495, 102]]], [[[199, 137], [211, 119], [299, 106], [433, 70], [498, 98]]], [[[203, 149], [217, 120], [308, 111], [444, 75], [508, 103]]], [[[204, 147], [220, 130], [322, 112], [458, 78], [513, 102]]], [[[208, 148], [229, 128], [326, 105], [473, 76], [521, 107]]], [[[224, 151], [242, 138], [340, 111], [477, 75], [527, 107]]], [[[224, 146], [239, 119], [349, 106], [488, 70], [537, 99]]], [[[249, 161], [257, 139], [367, 103], [501, 71], [543, 96]]], [[[257, 165], [262, 151], [373, 112], [510, 80], [549, 96]]], [[[275, 159], [276, 137], [393, 102], [520, 82], [557, 98]]], [[[287, 160], [280, 140], [404, 102], [530, 78], [567, 99]]], [[[308, 167], [296, 132], [416, 107], [540, 77], [570, 96]]], [[[319, 170], [312, 127], [432, 103], [563, 82], [581, 94]]], [[[334, 175], [332, 133], [441, 104], [566, 85], [585, 91]]], [[[351, 170], [338, 134], [450, 108], [578, 84], [590, 92]]], [[[366, 171], [353, 144], [461, 103], [595, 86], [598, 95]]], [[[390, 175], [376, 138], [482, 99], [607, 93], [603, 89]]], [[[405, 174], [392, 141], [497, 96], [614, 84], [609, 92]]], [[[429, 173], [406, 139], [507, 100], [627, 96]]], [[[437, 171], [424, 133], [517, 97], [632, 97]]], [[[473, 169], [447, 145], [533, 102]]], [[[481, 181], [463, 142], [549, 98]]], [[[490, 175], [488, 144], [564, 104]]], [[[521, 185], [502, 150], [571, 99]]], [[[533, 185], [514, 144], [592, 96]]], [[[547, 181], [532, 147], [600, 92]]], [[[562, 183], [547, 153], [615, 98]]], [[[585, 188], [571, 149], [622, 88]]], [[[598, 185], [581, 152], [632, 101]]], [[[608, 182], [608, 153]]], [[[628, 189], [630, 151]]], [[[629, 183]]], [[]], [[]], [[]]]
enemy_team_point = [[[[229, 213], [343, 163], [368, 110], [222, 143], [212, 94]], []], [[[239, 224], [338, 160], [362, 103], [223, 141], [207, 97]], []], [[[226, 214], [340, 158], [222, 146], [204, 93], [357, 109]], []], [[[236, 212], [337, 171], [357, 109], [223, 147], [197, 90]], []], [[[240, 212], [337, 177], [352, 107], [214, 137], [205, 97]], []], [[[239, 207], [334, 170], [351, 98], [220, 135], [200, 97]], []], [[[237, 202], [336, 176], [349, 108], [220, 149], [195, 102]], []], [[[243, 216], [327, 178], [349, 111], [219, 141], [194, 107]], []], [[[246, 219], [331, 184], [349, 118], [223, 146], [193, 106]], []], [[[244, 220], [334, 184], [346, 109], [221, 141], [195, 108]], []], [[[240, 210], [326, 185], [348, 113], [220, 140], [192, 103]], []], [[[252, 216], [335, 183], [352, 116], [221, 147], [189, 99]], []], [[[252, 217], [341, 179], [356, 124], [220, 144], [184, 97]], []], [[[248, 220], [347, 179], [356, 126], [213, 141], [186, 103]], []], [[[245, 223], [344, 175], [365, 122], [222, 145], [173, 104]], []], [[[244, 217], [358, 168], [367, 129], [222, 152], [172, 103]], []], [[[213, 147], [244, 223], [349, 174], [370, 134], [173, 104]], []], [[[171, 108], [216, 145], [244, 227], [352, 179], [369, 128]], []], [[[167, 103], [211, 128], [240, 228], [343, 182], [367, 123]], []], [[[166, 105], [214, 139], [241, 229], [363, 165], [370, 125]], []], [[[170, 95], [223, 140], [242, 227], [358, 167], [367, 122]], []], [[[173, 115], [216, 143], [242, 243], [365, 164], [366, 130]], []], [[[169, 115], [216, 148], [235, 240], [369, 163], [367, 129]], []], [[[169, 105], [218, 148], [231, 231], [372, 157], [364, 119]], []], [[[164, 113], [226, 146], [229, 228], [361, 130], [376, 160]], []], [[[162, 111], [226, 136], [223, 229], [371, 156], [360, 122]], []], [[[165, 114], [224, 137], [217, 215], [369, 158], [358, 122]], []], [[[167, 111], [236, 144], [217, 211], [351, 122], [367, 144]], []], [[[163, 106], [229, 136], [211, 219], [348, 126], [360, 147]], []], [[[169, 113], [242, 136], [208, 206], [348, 122], [361, 144]], []], [[[167, 115], [243, 140], [210, 202], [347, 116], [361, 142]], []], [[[165, 106], [240, 129], [191, 215], [346, 109], [361, 140]], []], [[[162, 104], [241, 128], [194, 202], [341, 108], [363, 143]], []], [[[172, 102], [246, 129], [196, 201], [340, 102], [359, 143]], []], [[[172, 99], [241, 122], [181, 191], [339, 102], [360, 139]], []], [[[187, 96], [247, 124], [333, 103], [358, 144], [188, 214]], []], [[[190, 104], [250, 119], [179, 198], [328, 101], [358, 134]], []], [[], []], [[[174, 185], [247, 120], [197, 91], [315, 91], [357, 126]], []], [[[184, 176], [251, 116], [315, 82], [355, 133], [204, 86]], []], [[[179, 171], [245, 116], [211, 83], [310, 71], [356, 131]], []], [[[183, 170], [242, 112], [302, 70], [351, 125], [209, 79]], []], [[[180, 161], [244, 115], [296, 75], [216, 84], [349, 128]], []], [[[176, 157], [248, 110], [216, 82], [292, 75], [348, 131]], []], [[[172, 152], [244, 110], [213, 89], [286, 80], [341, 130]], []], [[[171, 159], [245, 104], [216, 87], [280, 80], [339, 124]], []], [[[174, 151], [248, 109], [222, 92], [283, 81], [340, 115]], []], [[[171, 148], [253, 100], [222, 89], [276, 74], [337, 121]], []], [[[162, 147], [250, 101], [229, 84], [282, 74], [326, 113]], []], [[[157, 147], [252, 110], [225, 84], [278, 71], [325, 116]], []], [[[151, 146], [223, 84], [243, 101], [277, 71], [321, 113]], []], [[[140, 150], [227, 81], [231, 104], [279, 76], [323, 127]], []], [[[152, 157], [230, 82], [280, 61], [321, 114]], []], [[[147, 149], [238, 88], [310, 120], [280, 70]], []], [[[238, 94], [163, 141], [282, 68], [304, 122]], []], [[[154, 147], [240, 95], [279, 73], [299, 126]], []], [[[175, 146], [242, 96], [285, 64], [301, 121]], []], [[[174, 142], [244, 100], [278, 71], [298, 123]], []], [[[211, 104], [243, 94], [285, 70], [297, 117], [179, 141]], []], [[[181, 141], [206, 102], [247, 97], [282, 68], [296, 115]], []], [[[181, 137], [256, 105], [212, 112], [286, 64], [285, 124]], []], [[[182, 141], [209, 107], [253, 104], [292, 130], [281, 66]], []], [[[177, 143], [196, 110], [259, 103], [282, 129], [286, 77]], []], [[[172, 143], [199, 107], [258, 105], [277, 126], [287, 69]], []], [[[167, 143], [197, 111], [260, 104], [283, 143], [288, 74]], []], [[[165, 143], [202, 119], [263, 110], [272, 133], [285, 78]], []], [[[158, 144], [196, 119], [257, 105], [269, 135], [288, 75]], []], [[[155, 145], [195, 118], [264, 106], [268, 139], [288, 76]], []], [[[149, 141], [199, 119], [263, 148], [269, 115], [285, 77]], []], [[[148, 139], [204, 119], [271, 140], [274, 115], [296, 85]], []], [[[135, 135], [211, 123], [261, 143], [279, 123], [295, 86]], []], [[[125, 142], [212, 128], [252, 135], [281, 112], [293, 79]], []], [[[118, 137], [211, 127], [239, 144], [274, 124], [296, 89]], []], [[[117, 139], [213, 125], [246, 144], [285, 119], [299, 85]], []], [[[105, 138], [215, 131], [248, 151], [284, 125], [295, 91]], []], [[[104, 138], [220, 130], [240, 150], [290, 124], [298, 79]], []], [[[99, 132], [225, 126], [238, 148], [295, 122], [305, 88]], []], [[[91, 143], [226, 147], [239, 128], [303, 121], [305, 87]], []], [[[77, 138], [223, 144], [242, 129], [309, 126], [311, 93]], []], [[[78, 140], [208, 143], [249, 130], [309, 126], [312, 90]], []], [[[73, 145], [213, 148], [249, 135], [317, 134], [314, 97]], []], [[[71, 147], [207, 149], [255, 141], [315, 135], [311, 98]], []], [[[72, 144], [207, 148], [251, 135], [325, 131], [322, 91]], []], [[[76, 145], [197, 143], [265, 130], [337, 130], [322, 91]], []], [[[74, 156], [187, 148], [282, 143], [341, 138], [329, 88]], []], [[[78, 155], [199, 149], [273, 139], [348, 142], [339, 97]], []], [[[79, 162], [200, 146], [297, 143], [352, 143], [335, 97]], []], [[[85, 158], [193, 136], [294, 131], [363, 146], [341, 86]], []], [[[85, 169], [196, 145], [294, 134], [382, 150], [344, 88]], []], [[[91, 160], [201, 124], [309, 138], [385, 155], [350, 88]], []], [[[98, 184], [193, 126], [319, 120], [349, 96], [385, 145]], []], [[[102, 173], [197, 135], [320, 145], [357, 97], [384, 151]], []], [[[98, 170], [198, 134], [325, 146], [360, 97], [397, 163]], []], [[[115, 176], [207, 125], [334, 137], [364, 98], [415, 159]], []],[[[115, 176], [207, 125], [334, 137], [364, 98], [415, 159]], []],[[[115, 176], [207, 125], [334, 137], [364, 98], [415, 159]], []], [[], []]]


print(len(our_team_point))
print(len(enemy_team_point))

M,w,h = tv.get_trans_matrix([192,66],[7,341],[623,67],[629,356])


backgorund = cv2.imread('/Users/itaegyeong/Desktop/background_big.png')
# 이미지 축소
cam1 = cv2.VideoCapture('/Users/itaegyeong/Desktop/get_point.mov')

frame = 0
for our, enemy in zip(our_team_point, enemy_team_point):

    for our2, enemy2 in zip(our, enemy):

        print(our2,"  enemy   ",enemy2)

        trans_our_team_point, trans_enemy_team_point, trans_other_point = tv.trans_object_point(our2,enemy2,None,M,w,h)
        print(enemy2,frame )
        frame = frame + 1

        img = dc.canvas_show(trans_our_team_point,trans_enemy_team_point,trans_other_point,w,h)

        shrink = cv2.resize(img, None, fx=0.5, fy=0.5, interpolation=cv2.INTER_AREA)

        cv2.imshow('shrink', shrink)


        #cv2.imshow('img',img)
        cv2.waitKey(300)

